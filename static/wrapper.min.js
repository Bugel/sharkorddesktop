!function(){const e=window.sharkordDesktop,t=document.getElementById("sidebar"),n=document.getElementById("client-container");var i="camera; microphone; display-capture";window.addEventListener("message",function(t){t.data&&("sharkord-ptt"===t.data.type&&"boolean"==typeof t.data.pressed&&e&&e.pttState?e.pttState(t.data.pressed):"sharkord-add-server"===t.data.type&&t.data.url?function(t){var n=t.url,i=t.name||(n?function(){try{return new URL(n).hostname}catch(e){return"Server"}}():"Server");if(!n||!e.addServer)return;!function(e,t){N={url:e,name:t};var n=document.getElementById("add-server-confirm-text");n&&(n.textContent='Would you like to add "'+t+'" ('+e+") to your server panel?");document.getElementById("add-server-confirm-modal").classList.add("open")}(n.startsWith("http://")||n.startsWith("https://")?n:"https://"+n,i)}(t.data):"sharkord-request-communities-db"===t.data.type&&t.data.url&&e&&e.fetchCommunitiesDatabase&&t.source?e.fetchCommunitiesDatabase(t.data.url).then(function(e){try{t.source.postMessage({type:"sharkord-communities-db-response",data:e,lastRefreshed:(new Date).toISOString()},"*")}catch(e){}}).catch(function(){try{t.source.postMessage({type:"sharkord-communities-db-response",data:null},"*")}catch(e){}}):"sharkord-refresh-communities"===t.data.type&&e&&e.refreshCommunitiesCache&&v?(v.src="about:blank",setTimeout(function(){e.refreshCommunitiesCache().then(function(t){t&&e.getCommunitiesPageUrl&&v?e.getCommunitiesPageUrl().then(function(e){e&&v&&(v.src=e)}):v&&(v.src="communities/test.html")})},100)):"sharkord-copy-to-clipboard"===t.data.type&&"string"==typeof t.data.text&&function(e){var t=document.getElementById("copy-text-input"),n=document.getElementById("copy-text-modal");t&&(t.value=e||"");n&&n.classList.add("open");t&&(t.focus(),t.select())}(t.data.text))});var c=null,o=null,r=null;function a(){e&&e.getDevicePreferences&&e.pttState&&(o&&(document.removeEventListener("keydown",o,!0),document.removeEventListener("keyup",r,!0),o=r=null),c=null,e.getDevicePreferences().then(function(t){var n=t&&t.pttBinding;n&&0===String(n).indexOf("Key")&&(c=n,o=function(t){t.code===c&&(t.preventDefault(),t.stopPropagation(),e.pttState(!0))},r=function(t){t.code===c&&(t.preventDefault(),t.stopPropagation(),e.pttState(!1))},document.addEventListener("keydown",o,!0),document.addEventListener("keyup",r,!0))}))}if(e&&a(),!e||!e.getServers||!e.getServerUrl){var d=document.createElement("iframe");return d.className="client-frame active",d.title="Sharkord",d.allow=i,d.src="https://demo.sharkord.com",void n.appendChild(d)}let u=[],s="";var l=null,m=!1,v=null;function f(e){try{return new URL(e).origin}catch{return e}}function p(){return l?u.find(function(e){return e.id===l}):null}function g(){if(0===u.length){n.querySelectorAll(".client-frame").forEach(function(e){e.remove()}),(r=n.querySelector(".empty-state"))&&r.remove();var e=document.createElement("div");return e.className="empty-state",e.textContent="There are no saved servers to connect to! Join a community using the plus icon located on the bottom of the server panel!",void n.appendChild(e)}var t=n.querySelector(".empty-state");t&&t.remove();var c=function(){if(0===u.length)return[];if(!p())return[];var e=u.filter(function(e){return e.id===l||e.keepConnected}).map(function(e){return e.id});return 0!==e.indexOf(l)&&(e=e.filter(function(e){return e!==l})).unshift(l),e}(),o=Array.from(n.querySelectorAll(".client-frame")).filter(function(e){return e.dataset.serverId});if(0===c.length){var r,a=p();n.querySelectorAll(".client-frame").forEach(function(e){e.remove()}),(r=n.querySelector(".empty-state"))&&r.remove();var d=document.createElement("iframe");return d.className="client-frame active",d.title="Sharkord",d.allow=i,d.src=a?a.url:s,void n.appendChild(d)}var m={};c.forEach(function(e){m[e]=!0}),o.forEach(function(e){var t=e.dataset.serverId;m[t]||e.remove()}),c.forEach(function(e){var t=n.querySelector('.client-frame[data-server-id="'+e+'"]');if(t)t.classList.toggle("active",e===l);else{var c=u.find(function(t){return t.id===e});if(c){var o=document.createElement("iframe");o.className="client-frame"+(e===l?" active":""),o.title=c.name,o.allow=i,o.dataset.serverId=c.id,o.src=c.url,n.appendChild(o)}}}),n.querySelectorAll(".client-frame").forEach(function(e){e.classList.toggle("active",e.dataset.serverId===l)})}function y(t){m=!1,n.classList.remove("communities-active"),s=t.url,l=t.id,e.setServerUrl(t.url),n.querySelector('.client-frame[data-server-id="'+t.id+'"]')?n.querySelectorAll(".client-frame").forEach(function(e){e.classList.toggle("active",e.dataset.serverId===t.id)}):g(),I()}let E=null;var h=null;function I(){t.innerHTML="",u.forEach(function(e){const n=document.createElement("button");n.type="button";var i=function(e){return e.icon&&e.icon.trim()?e.icon.trim():(e.name||"?").charAt(0).toUpperCase()}(e),c=i.length>1||1===i.length&&i.charCodeAt(0)>127;n.className="server-btn"+(function(e){return e.id===l}(e)?" active":"")+(c?" icon-emoji":"");var o=[];e.identity&&o.push("saved login"),e.keepConnected&&o.push("keep connected"),n.title=e.name+(o.length?" ("+o.join(", ")+")":""),n.textContent=i,n.addEventListener("click",function(){(e.id!==l||m)&&y(e)}),n.addEventListener("contextmenu",function(t){t.preventDefault(),E=e.id;var n=document.getElementById("server-context-menu"),i=document.getElementById("context-keep-connected");i&&(i.textContent=e.keepConnected?"Keep connected âœ“":"Keep connected"),n.classList.add("open"),n.style.left=t.clientX+"px",n.style.top=t.clientY+"px"}),t.appendChild(n)});var e=document.createElement("div");e.className="sidebar-footer-actions";var n=document.createElement("button");n.type="button",n.className="communities-btn"+(m?" active":""),n.title="Communities",n.innerHTML='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 4.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5z"/><path d="M7 7a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/><path d="M17 7a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/><path d="M12 12c-1.5 0-3 .8-3 2v2h6v-2c0-1.2-1.5-2-3-2z"/><path d="M7 14c-1 0-2 .5-2 1.5v1.5h4v-1.5c0-1-.5-1.5-2-1.5z"/><path d="M17 14c-1 0-2 .5-2 1.5v1.5h4v-1.5c0-1-.5-1.5-2-1.5z"/></svg>',n.addEventListener("click",T),e.appendChild(n);var i=document.createElement("button");i.type="button",i.id="sidebar-settings-btn",i.className="settings-btn",i.title="Media devices (microphone, speaker, camera)",i.textContent="âš™",i.addEventListener("click",z),e.appendChild(i);var c=document.createElement("button");c.type="button",c.className="add-btn",c.title="Add server",c.textContent="+",c.addEventListener("click",k),e.appendChild(c),t.appendChild(e)}function k(){var e=document.getElementById("add-server-modal"),t=document.getElementById("add-server-input");t.value="",e.classList.add("open"),t.focus()}function L(){document.getElementById("add-server-modal").classList.remove("open")}function B(){var t=function(e){var t=(e||"").trim();return t?t.startsWith("http://")||t.startsWith("https://")?t:"https://"+t:null}((document.getElementById("add-server-input").value||"").trim());if(t){try{var n=new URL(t).hostname}catch(e){return}L(),e.addServer({url:t,name:n}).then(function(e){u=Array.isArray(e)?e:[];var n=u.find(function(e){return f(e.url)===f(t)});n?y(n):fe()})}}var C,b,x,w,S=["ğŸŸ","ğŸ¦ˆ","ğŸ³","ğŸ”µ","ğŸŸ¢","ğŸŸ¡","ğŸŸ ","ğŸ”´","ğŸ’œ","ğŸŸ£","ğŸ ","â­","ğŸŒ™","â˜€ï¸","ğŸ®","ğŸ’¬","ğŸ“","ğŸ”’","ğŸµ","ğŸ¤","ğŸ“·","ğŸš€","â¤ï¸","âœ¨","ğŸ”¥","ğŸ’¡","ğŸ¯","ğŸŒŸ","ğŸ¨","ğŸ“Œ","ğŸŒˆ","âš¡","ğŸ†","ğŸª","ğŸ­","ğŸ˜€","ğŸ‘","ğŸ‰","ğŸ””","ğŸ“¬","ğŸŒ","ğŸ›¡ï¸","âš™ï¸","ğŸ”§"];function D(e){var t=u.find(function(t){return t.id===e});if(t){var n;h=e,(n=document.getElementById("change-icon-emoji-grid")).innerHTML||S.forEach(function(e){var t=document.createElement("span");t.textContent=e,t.title=e,t.addEventListener("click",function(){document.getElementById("change-icon-input").value=e,document.getElementById("change-icon-emoji-picker").classList.remove("open")}),n.appendChild(t)});var i=document.getElementById("change-icon-input");i.value=t.icon||"",i.maxLength=4,document.getElementById("change-icon-modal").classList.add("open"),document.getElementById("change-icon-emoji-picker").classList.remove("open"),i.focus()}}function P(){document.getElementById("change-icon-modal").classList.remove("open"),document.getElementById("change-icon-emoji-picker").classList.remove("open"),h=null}function A(){if(h){var t=(document.getElementById("change-icon-input").value||"").trim(),n=h;P(),e.updateServer(n,{icon:t||void 0}).then(function(){fe()})}}function M(){document.getElementById("server-context-menu").classList.remove("open"),E=null}function U(){var e=document.getElementById("admin-token-modal");e&&e.classList.remove("open")}function q(){var t=document.getElementById("admin-token-input"),n=t&&t.value?t.value.trim():"";U(),n&&e.submitAdminToken&&e.submitAdminToken(n,l).catch(function(){})}function T(){m=!0;var t=(v||((v=document.createElement("iframe")).className="communities-frame",v.title="Communities",v.src="communities/test.html",n.appendChild(v),e&&e.getCommunitiesPageUrl&&e.getCommunitiesPageUrl().then(function(e){e&&v&&(v.src=e)})),v);"about:blank"===t.src&&(t.src="communities/test.html",e&&e.getCommunitiesPageUrl&&e.getCommunitiesPageUrl().then(function(e){e&&t&&(t.src=e)})),n.classList.add("communities-active"),I()}C=document.getElementById("admin-token-modal"),b=document.getElementById("admin-token-input"),x=document.getElementById("admin-token-cancel"),w=document.getElementById("admin-token-submit"),C&&b&&x&&w&&(x.addEventListener("click",U),w.addEventListener("click",q),b.addEventListener("keydown",function(e){"Enter"===e.key&&q(),"Escape"===e.key&&U()}),C.addEventListener("click",function(e){e.target===C&&U()})),e.onOpenAdminTokenDialog&&e.onOpenAdminTokenDialog(function(){var e=document.getElementById("admin-token-modal"),t=document.getElementById("admin-token-input");e&&t&&(t.value="",e.classList.add("open"),t.focus())});var N=null;function j(){N=null,document.getElementById("add-server-confirm-modal").classList.remove("open")}function O(){document.getElementById("copy-text-modal").classList.remove("open")}function V(){var t=N;j(),t&&e.addServer&&(m=!1,n.classList.remove("communities-active"),v&&(v.remove(),v=null),I(),e.addServer({url:t.url,name:t.name}).then(function(e){u=Array.isArray(e)?e:[];var n=u.find(function(e){return e.url===t.url||f(e.url)===f(t.url)});n?y(n):fe()}))}function z(){var e=document.getElementById("device-settings-modal");if(e){var t=document.getElementById("sidebar-settings-btn");t&&t.classList.add("active"),re(),ae("device-input-test-panel",null),ae("device-webcam-test-panel",null),e.classList.add("open"),ee()}}function H(){var e=document.getElementById("sidebar-settings-btn");e&&e.classList.remove("active");var t=document.getElementById("device-settings-modal");t&&t.classList.remove("open"),re(),a()}function R(e,t,n,i){var c=document.getElementById(e);if(c){c.innerHTML="";var o=document.createElement("option");o.value="none",o.textContent="None",c.appendChild(o);var r=document.createElement("option");r.value="",r.textContent="Default",c.appendChild(r),t.forEach(function(e){var t=document.createElement("option");t.value=e.deviceId,t.textContent=e.label||e.kind+" "+c.options.length,c.appendChild(t)}),c.value="none"===i?"none":i||""}}var K=100,W=null,F=null;function X(e,t,n){var i,c=document.getElementById(e);if(c&&(c.style.left=(i=t,Math.max(0,Math.min(200,i))/200*100+"%"),n)){var o=document.getElementById(n);o&&(o.textContent=t+"%")}}function G(t,n,i,c,o,r){var a=document.getElementById(t),d=document.getElementById(n);document.getElementById(i);if(a&&d){X(n,r.current,c),a.addEventListener("click",function(e){e.target!==d&&s(e)});var u=!1;d.addEventListener("mousedown",function(e){e.preventDefault(),u=!0}),document.addEventListener("mousemove",function(e){u&&s(e)}),document.addEventListener("mouseup",function e(){u&&(u=!1),document.removeEventListener("mousemove",move),document.removeEventListener("mouseup",e)})}function s(t){var i,d=a.getBoundingClientRect(),u=t.clientX-d.left,s=(i=u/d.width*100,Math.round(Math.max(0,Math.min(200,i/100*200))));r.current=s,"audioInputVolume"===o&&(K=s),X(n,s,c),function(e,t){"audioInputVolume"===e&&W&&(W.gain.value=t/100)}(o,s),function(t,n){e.getDevicePreferences&&e.setDevicePreferences&&e.getDevicePreferences().then(function(i){i[t]=n,e.setDevicePreferences(i),e.requestApplyDevicePreferences&&e.requestApplyDevicePreferences()})}(o,s)}}var J=!1;function Y(){var e=document.getElementById("device-ptt-display");e&&(e.textContent=function(e){if(!e)return"Not set";if(0===e.indexOf("Mouse"))return"Mouse "+e.slice(5);if(0===e.indexOf("Key")){var t=e.slice(3);return t.length,t}return e}($),$?e.classList.add("is-set"):e.classList.remove("is-set"))}function Q(t){$=t||void 0,e.getDevicePreferences&&e.setDevicePreferences&&e.getDevicePreferences().then(function(t){t.pttBinding=$,e.setDevicePreferences(t)})}function Z(){var e=document.getElementById("device-ptt-set"),t=document.getElementById("device-ptt-display");function n(t){e.classList.remove("listening"),e.textContent="Set key",t?(Q(t),Y()):Y(),document.removeEventListener("keydown",i,!0),document.removeEventListener("mousedown",c,!0)}function i(e){if("Escape"===e.key)return e.preventDefault(),void n(null);e.preventDefault(),e.stopPropagation();var t=e.code||(1===e.key.length?"Key"+e.key.toUpperCase():e.key);0===t.indexOf("Key")&&n(t)}function c(e){0!==e.button&&2!==e.button&&(e.preventDefault(),e.stopPropagation(),n("Mouse"+e.button))}e&&t&&(e.classList.add("listening"),e.textContent="Press key or buttonâ€¦",t.textContent="Listeningâ€¦",document.addEventListener("keydown",i,!0),document.addEventListener("mousedown",c,!0))}var $=void 0,_=null;function ee(){e.getDevicePreferences&&navigator.mediaDevices&&e.getDevicePreferences().then(function(e){$=e&&e.pttBinding||void 0,_={audioInput:e&&e.audioInput,videoInput:e&&e.videoInput,audioInputVolume:e&&null!=e.audioInputVolume?e.audioInputVolume:100,pttBinding:e&&e.pttBinding},Y(),function(e){X("device-input-puck",K=e&&null!=e.audioInputVolume?e.audioInputVolume:100,"device-input-volume-pct"),J||(J=!0,G("device-input-track","device-input-puck","device-input-fill","device-input-volume-pct","audioInputVolume",{current:K}))}(e);var t=document.getElementById("device-input"),n=document.getElementById("device-webcam");function i(t){var n=(t||[]).filter(function(e){return"audioinput"===e.kind}),i=(t||[]).filter(function(e){return"videoinput"===e.kind});R("device-input",n,0,e&&e.audioInput),R("device-webcam",i,0,e&&e.videoInput)}t&&n&&navigator.mediaDevices.enumerateDevices().then(function(e){(e||[]).some(function(e){return!e.label})?navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(function(t){t.getTracks().forEach(function(e){e.stop()}),navigator.mediaDevices.enumerateDevices().then(i).catch(function(){i(e)})}).catch(function(){i(e||[])}):i(e||[])}).catch(function(){i([])})})}function te(e){if(e&&e.value&&"none"!==e.value&&e.options&&e.options[e.selectedIndex]){var t=e.options[e.selectedIndex].textContent;return t&&t.trim()||void 0}}var ne=null,ie=null,ce=null,oe=null;function re(){ne&&(ne.getTracks().forEach(function(e){e.stop()}),ne=null),ie&&ie.srcObject&&(ie.srcObject.getTracks().forEach(function(e){e.stop()}),ie.srcObject=null),ce&&(ce.close().catch(function(){}),ce=null),oe&&(cancelAnimationFrame(oe),oe=null),W=null;var e=document.getElementById("device-input-fill");e&&(e.style.display="none",e.style.width="0"),F&&(F.textContent="Test",F.classList.remove("device-test-btn-stop"),F=null)}function ae(e,t){var n=document.getElementById(e);n&&(n.innerHTML="",t&&t.nodeType&&n.appendChild(t))}var de=-60;function ue(e,t){var n=(e-de)/60;return Math.max(0,Math.min(t,n*t))}function se(){var e=document.getElementById("device-input-test"),t=document.getElementById("device-input"),n="device-input-test-panel",i=document.getElementById("device-input-fill");if(t&&navigator.mediaDevices){if(F===e)return re(),void ae(n,null);if(re(),"none"!==t.value&&""!==t.value){var c,o={audio:!t.value||{deviceId:{exact:t.value}}};navigator.mediaDevices.getUserMedia(o).then(function(t){ne=t;var c=document.getElementById(n);if(c){c.innerHTML="",i&&(i.style.display="block",i.style.width="0",i.style.backgroundColor="#3b82f6"),e&&(F=e,e.textContent="Stop",e.classList.add("device-test-btn-stop"));var o=new(window.AudioContext||window.webkitAudioContext);ce=o;var r=o.createMediaStreamSource(t),a=o.createGain();a.gain.value=K/100,W=a;var d=o.createAnalyser();d.fftSize=256,d.smoothingTimeConstant=.8,r.connect(a),a.connect(d);var u=new Uint8Array(d.frequencyBinCount),s=document.getElementById("device-input-track");!function e(){if(ne){d.getByteFrequencyData(u);for(var t=0,n=0;n<u.length;n++)t+=u[n];var c,o=t/u.length/255,r=(c=o)<=0?de:Math.max(de,20*Math.log10(c));if(i&&s){var a=s.getBoundingClientRect().width;i.style.width=ue(r,a)+"px"}oe=requestAnimationFrame(e)}}()}}).catch(function(e){ae(n,function(){var t=document.createElement("p");return t.className="device-test-msg",t.textContent="Could not access device: "+(e.message||e.name||"Unknown error"),t}())})}else ae(n,((c=document.createElement("p")).className="device-test-msg",c.textContent="none"===t.value?"None selected â€” no device to test.":"Select a device to test.",c))}}function le(){var e=document.getElementById("device-webcam-test"),t=document.getElementById("device-webcam"),n="device-webcam-test-panel";if(t&&navigator.mediaDevices){if(F===e)return re(),void ae(n,null);if(re(),"none"!==t.value&&""!==t.value){var i,c={video:!t.value||{deviceId:{exact:t.value}}};navigator.mediaDevices.getUserMedia(c).then(function(t){ne=t;var i=document.getElementById(n);if(i){i.innerHTML="",e&&(F=e,e.textContent="Stop",e.classList.add("device-test-btn-stop"));var c=document.createElement("video");c.autoplay=!0,c.muted=!0,c.playsInline=!0,c.srcObject=t,ie=c,i.appendChild(c)}}).catch(function(e){ae(n,function(){var t=document.createElement("p");return t.className="device-test-msg",t.textContent="Could not access camera: "+(e.message||e.name||"Unknown error"),t}())})}else ae(n,((i=document.createElement("p")).className="device-test-msg",i.textContent="none"===t.value?"None selected â€” no device to test.":"Select a device to test.",i))}}function me(){if(e.setDevicePreferences){re(),$=void 0;var t={audioInput:void 0,videoInput:void 0,audioInputLabel:void 0,videoInputLabel:void 0,audioInputVolume:100,pttBinding:void 0};e.setDevicePreferences(t),e.requestApplyDevicePreferences&&e.requestApplyDevicePreferences(),ee()}}function ve(){if(e.setDevicePreferences){var t=document.getElementById("device-input"),i=document.getElementById("device-webcam"),c={audioInput:t&&t.value||void 0,videoInput:i&&i.value||void 0,audioInputLabel:te(t),videoInputLabel:te(i),audioInputVolume:K,pttBinding:$},o=function(){if(!_)return!1;var e=document.getElementById("device-input"),t=document.getElementById("device-webcam"),n=e&&e.value||void 0,i=t&&t.value||void 0,c=K,o=$;return n!==_.audioInput||i!==_.videoInput||c!==_.audioInputVolume||o!==_.pttBinding}();if(H(),e.setDevicePreferences(c),e.requestApplyDevicePreferences&&e.requestApplyDevicePreferences(),o&&window.confirm("Changes to input settings require a reconnect. Would you like to do that now?")){var r=p();if(r&&r.url&&n){var a=n.querySelector('.client-frame[data-server-id="'+r.id+'"]');a&&(a.src=r.url)}}}}function fe(){e.getServers().then(function(t){u=Array.isArray(t)?t:[];var n=l;0===u.length?(l=null,s="https://demo.sharkord.com",e.setServerUrl(s)):n&&u.find(function(e){return e.id===n})||(l=u[0].id,s=u[0].url,e.setServerUrl(u[0].url)),g(),I()})}!function(){var e=document.getElementById("device-settings-modal"),t=document.getElementById("device-settings-reset"),n=document.getElementById("device-settings-cancel"),i=document.getElementById("device-settings-save");if(e&&n&&i){t&&t.addEventListener("click",me),n.addEventListener("click",H),i.addEventListener("click",ve);var c=document.getElementById("device-ptt-set"),o=document.getElementById("device-ptt-reset");c&&c.addEventListener("click",Z),o&&o.addEventListener("click",function(){Q(void 0),Y()});var r=document.getElementById("device-input-test"),a=document.getElementById("device-webcam-test");r&&r.addEventListener("click",se),a&&a.addEventListener("click",le),e.addEventListener("click",function(t){t.target===e&&H()}),document.addEventListener("keydown",function(t){"Escape"===t.key&&e.classList.contains("open")&&H()})}}(),function(){var e=document.getElementById("add-server-modal"),t=document.getElementById("add-server-input"),n=document.getElementById("add-server-cancel"),i=document.getElementById("add-server-add");n.addEventListener("click",L),i.addEventListener("click",B),t.addEventListener("keydown",function(e){"Enter"===e.key&&B(),"Escape"===e.key&&L()}),e.addEventListener("click",function(t){t.target===e&&L()})}(),function(){var e=document.getElementById("add-server-confirm-modal"),t=document.getElementById("add-server-confirm-cancel"),n=document.getElementById("add-server-confirm-add");e&&t&&n&&(t.addEventListener("click",j),n.addEventListener("click",V),e.addEventListener("click",function(t){t.target===e&&j()}),document.addEventListener("keydown",function(t){"Escape"===t.key&&e.classList.contains("open")&&j()}))}(),function(){var t=document.getElementById("copy-text-modal"),n=document.getElementById("copy-text-close"),i=document.getElementById("copy-text-copy"),c=document.getElementById("copy-text-input");t&&n&&i&&c&&(n.addEventListener("click",O),i.addEventListener("click",function(){var t=c.value;t&&e&&e.copyToClipboard&&e.copyToClipboard(t),O()}),t.addEventListener("click",function(e){e.target===t&&O()}),document.addEventListener("keydown",function(e){"Escape"===e.key&&t.classList.contains("open")&&O()}))}(),function(){var e=document.getElementById("change-icon-modal"),t=document.getElementById("change-icon-input"),n=document.getElementById("change-icon-emoji-btn"),i=document.getElementById("change-icon-emoji-picker");document.getElementById("change-icon-cancel").addEventListener("click",P),document.getElementById("change-icon-save").addEventListener("click",A),n.addEventListener("click",function(e){e.stopPropagation(),i.classList.toggle("open")}),document.addEventListener("click",function(){i.classList.remove("open")}),i.addEventListener("click",function(e){e.stopPropagation()}),t.addEventListener("keydown",function(e){"Enter"===e.key&&A(),"Escape"===e.key&&P()}),e.addEventListener("click",function(t){t.target===e&&P()})}(),function(){document.getElementById("server-context-menu");document.getElementById("context-change-icon").addEventListener("click",function(){var e=E;M(),e&&D(e)}),document.getElementById("context-keep-connected").addEventListener("click",function(){var t=E;if(M(),t){var n=u.find(function(e){return e.id===t});n&&e.updateServer(t,{keepConnected:!n.keepConnected}).then(function(e){Array.isArray(e)?(u=e,g(),I()):fe()})}}),document.getElementById("context-remove").addEventListener("click",function(){var t=E;if(M(),t){var n=u.find(function(e){return e.id===t});n&&confirm('Remove "'+n.name+'" from list?')&&(e.removeServer(t),fe())}}),document.addEventListener("click",M)}(),(e.getServerUrl?e.getServerUrl():Promise.resolve("https://demo.sharkord.com")).then(function(t){s=t||"https://demo.sharkord.com",e.getServers().then(function(t){if(u=Array.isArray(t)?t:[],u.length>0){var n=u.find(function(e){return f(e.url)===f(s)});n?(l=n.id,s=n.url):(l=u[0].id,s=u[0].url,e.setServerUrl(u[0].url))}else l=null;g(),I()})}),e.onNavigate&&e.onNavigate(function(e){s=e;var t=u.find(function(t){return f(t.url)===f(e)});t?(l=t.id,g()):g(),I()})}();